# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/clock/canaan,k230-clk.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Canaan Kendryte K230 Clock

maintainers:
  - Bo Wang <Juvenoia@...>
  - Xukai Wang <kingxukai@zohomail.com>

description:
  Canaan Kendryte K230 SoC clocks driver bindings. The clock
  controller node must be defined as a child node of the K230
  system controller node.

properties:
  compatible:
    const: canaan,k230-clk-composite

  clocks:
    maxItems: 1

  '#clock-cells':
    const: 1

required:
  - compatible
  - '#clock-cells'
  - clocks

additionalProperties: false

examples:
  - |
    #include <dt-bindings/clock/k230-clk.h>
    osc24m: oscillator {
        #clock-cells  = <0>;
        compatible  = "fixed-clock";
        clock-frequency = <24000000>;
        clock-accuracy  = <0>;
        clock-output-names = "osc24m";

        status  = "okay";
    };

    plls: clock-plls {
        #clock-cells  = <0>;
        compatible  = "canaan,k230-pll";
        reg = <0x0 0x91102000 0x0 0x1000>;
        clocks = <&osc24m>;

        status = "okay";
    };

    sysclk: clock-controller {
        #clock-cells  = <1>;
        compatible  = "canaan,k230-clk-composite";
        reg = <0x0 0x91100000 0x0 0x1000>;
        clocks  = <&osc24m>, <&plls>;
        clock-output-names = "CPU0_SRC", "CPU0_ACLK",
        "CPU0_PLIC", "CPU0_NOC_DDRCP5", "CPU0_PCLK",
        "PMU_PCLK", "HS_HCLK_HIGN_SRC", "HS_HCLK_HIGN_GATE",
        "HS_HCLK_SRC", "HS_SD0_HS_AHB_GAT", "HS_SD1_HS_AHB_GAT",
        "HS_SSI1_HS_AHB_GA", "HS_SSI2_HS_AHB_GA", "HS_USB0_HS_AHB_GA",
        "HS_USB1_HS_AHB_GA", "HS_SSI0_AXI", "HS_SSI1", "HS_SSI2",
        "HS_QSPI_AXI_SRC", "HS_SSI1_ACLK_GATE", "HS_SSI2_ACLK_GATE",
        "HS_SD_CARD_SRC", "HS_SD0_CARD_TX", "HS_SD1_CARD_TX",
        "HS_SD_AXI_SRC", "HS_SD0_AXI_GATE", "HS_SD1_AXI_GATE",
        "HS_SD0_BASE_GATE", "HS_SD1_BASE_GATE", "HS_OSPI_SRC",
        "HS_USB_REF_51M", "HS_SD_TIMER_SRC", "HS_SD0_TIMER_GATE",
        "HS_SD1_TIMER_GATE", "HS_USB0_REFERENCE", "HS_USB1_REFERENCE";

        status = "okay";
    };

    /* Consumer Usage: */
    pdma {
      clocks  = <&sysclk K230_CPU0_SRC>;
    };
};
